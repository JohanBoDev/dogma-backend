# ğŸ„ Sistema DOGMA - Backend

Este repositorio contiene el backend del sistema **DOGMA** (DocumentaciÃ³n Operativa de GestiÃ³n de MercancÃ­a y AlmacÃ©n), desarrollado en Node.js y Express, con conexiÃ³n a MySQL.

## ğŸ› ï¸ TecnologÃ­as utilizadas

- Node.js
- Express.js
- MySQL
- dotenv
- express-validator
- bcrypt
- jsonwebtoken
- cors

---

## ğŸ“¦ Estructura del proyecto

```
/dogma-backend
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ productosController.js
â”‚   â”œâ”€â”€ separacionController.js
â”‚   â”œâ”€â”€ despachoController.js
â”‚   â”œâ”€â”€ inventarioController.js
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ productosRoutes.js
â”‚   â”œâ”€â”€ separacionRoutes.js
â”‚   â”œâ”€â”€ despachoRoutes.js
â”‚   â”œâ”€â”€ inventarioRoutes.js
â”œâ”€â”€ middlewares/
â”‚   â”œâ”€â”€ authMiddleware.js
â”‚   â”œâ”€â”€ roleMiddleware.js
â”‚   â”œâ”€â”€ validationMiddleware.js
â”œâ”€â”€ config/
â”‚   â””â”€â”€ db.js
â”œâ”€â”€ .env
â”œâ”€â”€ app.js
â””â”€â”€ index.js
```

---

## ğŸ“˜ Casos de uso y archivos

### `productosController.js` + `productosRoutes.js`

1. **Registrar producto entrante**
   - `POST /productos/entrantes`
   - Tabla: `entradas`

2. **ConfirmaciÃ³n de producto y especificaciones**
   - `POST /productos/confirmacion`
   - Tabla: `confirmaciones`

3. **Registrar producto en retorno**
   - `POST /productos/retorno`
   - Tabla: `devoluciones`

4. **Documentar producto en mal estado**
   - `POST /productos/danados`
   - Tabla: `productos_danados`

---

### `separacionController.js` + `separacionRoutes.js`

5. **Generar consolidado de separaciÃ³n**
   - `POST /separacion/consolidado`
   - Tabla: `separaciones`

---

### `despachoController.js` + `despachoRoutes.js`

6. **Generar consolidado de despacho**
   - `POST /despacho/consolidado`
   - Tabla: `despachos`

---

### `inventarioController.js` + `inventarioRoutes.js`

7. **Cruce de inventario fÃ­sico y digital**
   - `POST /inventario/cruce`
   - Tabla: `conteos_fisicos`

8. **Consulta de historial por producto**
   - `GET /inventario/:codigoProducto`
   - Tabla: `historial_movimientos`

---

## ğŸ” AutenticaciÃ³n y roles

- Se utiliza **JWT** para autenticaciÃ³n.
- Roles disponibles:
  - `colaborador`
  - `lÃ­der`
  - `admin`

---

## ğŸ§ª Pruebas

Todos los endpoints deben probarse con **Postman**. La colecciÃ³n se guardarÃ¡ en `/postman`.

---

## âœ¨ Autor

Proyecto desarrollado por Johan Bohorquez como parte del sistema DOGMA.
